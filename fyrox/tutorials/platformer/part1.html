<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>2D Platformer tutorial - Fyrox Cheat Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../../../fyrox/introduction.html"><strong aria-hidden="true">2.</strong> fyrox</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/beginning/getting_started.html"><strong aria-hidden="true">2.1.</strong> Getting started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/beginning/framework.html"><strong aria-hidden="true">2.1.1.</strong> Framework</a></li><li class="chapter-item expanded "><a href="../../../fyrox/beginning/custom_game_loop.html"><strong aria-hidden="true">2.1.2.</strong> Custom game loop</a></li><li class="chapter-item expanded "><a href="../../../fyrox/beginning/scene_and_scene_graph.html"><strong aria-hidden="true">2.1.3.</strong> Scene and scene graph</a></li><li class="chapter-item expanded "><a href="../../../fyrox/beginning/data_management.html"><strong aria-hidden="true">2.1.4.</strong> Data management</a></li></ol></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/scene.html"><strong aria-hidden="true">2.2.</strong> Scene</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/scene/graph.html"><strong aria-hidden="true">2.2.1.</strong> Graph</a></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/base_node.html"><strong aria-hidden="true">2.2.2.</strong> Base node</a></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/mesh_node.html"><strong aria-hidden="true">2.2.3.</strong> Mesh node</a></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/light_node.html"><strong aria-hidden="true">2.2.4.</strong> Light node</a></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/sprite_node.html"><strong aria-hidden="true">2.2.5.</strong> Sprite node</a></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/particle_system_node.html"><strong aria-hidden="true">2.2.6.</strong> Particle system node (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/terrain_node.html"><strong aria-hidden="true">2.2.7.</strong> Terrain node (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/camera_node.html"><strong aria-hidden="true">2.2.8.</strong> Camera node</a></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/decal_node.html"><strong aria-hidden="true">2.2.9.</strong> Decal node</a></li><li class="chapter-item expanded "><a href="../../../fyrox/scene/rectangle.html"><strong aria-hidden="true">2.2.10.</strong> Rectangle node</a></li></ol></li><li class="chapter-item expanded "><a href="../../../fyrox/animation/animation.html"><strong aria-hidden="true">2.3.</strong> Animation (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/rendering/rendering.html"><strong aria-hidden="true">2.4.</strong> Rendering</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/rendering/shaders.html"><strong aria-hidden="true">2.4.1.</strong> Shaders</a></li><li class="chapter-item expanded "><a href="../../../fyrox/rendering/materials.html"><strong aria-hidden="true">2.4.2.</strong> Materials</a></li></ol></li><li class="chapter-item expanded "><a href="../../../fyrox/sound/sound.html"><strong aria-hidden="true">2.5.</strong> Sound (WIP)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/sound/hrtf.html"><strong aria-hidden="true">2.5.1.</strong> HRTF (WIP)</a></li></ol></li><li class="chapter-item expanded "><a href="../../../fyrox/physics/physics.html"><strong aria-hidden="true">2.6.</strong> Physics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/physics/rigid_body.html"><strong aria-hidden="true">2.6.1.</strong> Rigid body</a></li><li class="chapter-item expanded "><a href="../../../fyrox/physics/collider.html"><strong aria-hidden="true">2.6.2.</strong> Collider</a></li><li class="chapter-item expanded "><a href="../../../fyrox/physics/joint.html"><strong aria-hidden="true">2.6.3.</strong> Joint (WIP)</a></li></ol></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/ui.html"><strong aria-hidden="true">2.7.</strong> User Interface</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/ui/basic_concepts/basic_concepts.html"><strong aria-hidden="true">2.7.1.</strong> Basic concepts</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/setting_up.html"><strong aria-hidden="true">2.7.2.</strong> Setting up a user interface</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/general_rules.html"><strong aria-hidden="true">2.7.3.</strong> General rules</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/font.html"><strong aria-hidden="true">2.7.4.</strong> Fonts (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/theme.html"><strong aria-hidden="true">2.7.5.</strong> Theme</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/widgets.html"><strong aria-hidden="true">2.7.6.</strong> Widgets</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/ui/creating_button.html"><strong aria-hidden="true">2.7.6.1.</strong> Button (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/border.html"><strong aria-hidden="true">2.7.6.2.</strong> Border</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/canvas.html"><strong aria-hidden="true">2.7.6.3.</strong> Canvas (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/checkbox/check_box.html"><strong aria-hidden="true">2.7.6.4.</strong> Check box</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/curve_editor.html"><strong aria-hidden="true">2.7.6.5.</strong> Curve editor (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/decorator.html"><strong aria-hidden="true">2.7.6.6.</strong> Decorator (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/dock.html"><strong aria-hidden="true">2.7.6.7.</strong> Docking manager (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/dropdown_list.html"><strong aria-hidden="true">2.7.6.8.</strong> Dropdown list (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/expander.html"><strong aria-hidden="true">2.7.6.9.</strong> Expander (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/file_browser.html"><strong aria-hidden="true">2.7.6.10.</strong> File browser (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/grid.html"><strong aria-hidden="true">2.7.6.11.</strong> Grid</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/image.html"><strong aria-hidden="true">2.7.6.12.</strong> Image (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/inspector.html"><strong aria-hidden="true">2.7.6.13.</strong> Inspector (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/list_view.html"><strong aria-hidden="true">2.7.6.14.</strong> List view (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/menu.html"><strong aria-hidden="true">2.7.6.15.</strong> Menu (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/message_box.html"><strong aria-hidden="true">2.7.6.16.</strong> Message box (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/numeric.html"><strong aria-hidden="true">2.7.6.17.</strong> Numeric field (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/popup.html"><strong aria-hidden="true">2.7.6.18.</strong> Popup (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/progress_bar.html"><strong aria-hidden="true">2.7.6.19.</strong> Progress bar (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/range.html"><strong aria-hidden="true">2.7.6.20.</strong> Range (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/rect.html"><strong aria-hidden="true">2.7.6.21.</strong> Rect (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/scroll_bar.html"><strong aria-hidden="true">2.7.6.22.</strong> Scroll bar (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/scroll_panel.html"><strong aria-hidden="true">2.7.6.23.</strong> Scroll panel (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/scroll_viewer.html"><strong aria-hidden="true">2.7.6.24.</strong> Scroll viewer (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/stack_panel.html"><strong aria-hidden="true">2.7.6.25.</strong> Stack panel</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/tab_control.html"><strong aria-hidden="true">2.7.6.26.</strong> Tab Control</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/text.html"><strong aria-hidden="true">2.7.6.27.</strong> Text</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/text_box.html"><strong aria-hidden="true">2.7.6.28.</strong> Text box (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/tree.html"><strong aria-hidden="true">2.7.6.29.</strong> Tree (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/vector_image.html"><strong aria-hidden="true">2.7.6.30.</strong> Vector image (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/window.html"><strong aria-hidden="true">2.7.6.31.</strong> Window</a></li><li class="chapter-item expanded "><a href="../../../fyrox/ui/wrap_panel.html"><strong aria-hidden="true">2.7.6.32.</strong> Wrap panel (WIP)</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../fyrox/serialization/serialization.html"><strong aria-hidden="true">2.8.</strong> Serialization (WIP)</a></li><li class="chapter-item expanded "><a href="../../../fyrox/resources/resources.html"><strong aria-hidden="true">2.9.</strong> Resource Management</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/resources/model.html"><strong aria-hidden="true">2.9.1.</strong> 3D Models</a></li><li class="chapter-item expanded "><a href="../../../fyrox/resources/texture.html"><strong aria-hidden="true">2.9.2.</strong> Textures</a></li><li class="chapter-item expanded "><a href="../../../.fyrox/resources/sound.html"><strong aria-hidden="true">2.9.3.</strong> Sound Buffers</a></li></ol></li><li class="chapter-item expanded "><a href="../../../fyrox/tutorials/tutorials.html"><strong aria-hidden="true">2.10.</strong> Tutorials</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/tutorials/fps/intro.html"><strong aria-hidden="true">2.10.1.</strong> FPS Tutorial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/tutorials/fps/tutorial-1/tutorial-part-1.html"><strong aria-hidden="true">2.10.1.1.</strong> Character controller</a></li><li class="chapter-item expanded "><a href="../../../fyrox/tutorials/fps/tutorial-2/tutorial-part-2.html"><strong aria-hidden="true">2.10.1.2.</strong> Weapons</a></li><li class="chapter-item expanded "><a href="../../../fyrox/tutorials/fps/tutorial-3/tutorial-part-3.html"><strong aria-hidden="true">2.10.1.3.</strong> Bots and AI</a></li></ol></li><li class="chapter-item expanded "><a href="../../../fyrox/tutorials/rpg/intro.html"><strong aria-hidden="true">2.10.2.</strong> RPG Tutorial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyrox/tutorials/rpg/tutorial-1/tutorial-part-1.html"><strong aria-hidden="true">2.10.2.1.</strong> Character controller</a></li></ol></li><li class="chapter-item expanded "><a href="../../../fyrox/tutorials/platformer/part1.html" class="active"><strong aria-hidden="true">2.10.3.</strong> 2D Platformer tutorial</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../fyroxed/introduction.html"><strong aria-hidden="true">3.</strong> Fyroxed</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../fyroxed/overview.html"><strong aria-hidden="true">3.1.</strong> Overview</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Fyrox Cheat Book</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/fyrox-book/fyrox-book.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="2d-platformer-tutorial-work-in-progress"><a class="header" href="#2d-platformer-tutorial-work-in-progress">2D Platformer Tutorial (WORK IN PROGRESS)</a></h1>
<p><strong>THIS IS UNFINISHED TUTORIAL, IGNORE IT</strong></p>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h2>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p>In this tutorial we'll make a 2D platformer using new plugin and scripting system that was become available in Fyrox 0.25.</p>
<h2 id="project"><a class="header" href="#project">Project</a></h2>
<p>Let's start by making a new project using special tiny tool - <code>fyrox-template</code> - it allows you to generate all boilerplate
parts in a single call. Install it using following command:</p>
<pre><code class="language-shell">cargo install fyrox-template
</code></pre>
<p>Navigate to a folder where you want the project to be created and do the following command:</p>
<pre><code class="language-shell">fyrox-template --name platformer
</code></pre>
<p>The tool accepts only one argument - project name (it could be extended in the future). After the project is generated, you 
should memorize two commands:</p>
<ul>
<li><code>cargo run --package editor --release</code> - launches the editor with your game attached, the editor allows you to run your game
inside it and edit game entities. It is intended to be used only for development.</li>
<li><code>cargo run --package executor --release</code> - creates and runs production binary of your game that can be shipped (for
example - to a store).</li>
</ul>
<p>Navigate to the <code>platformer</code> directory and run <code>cargo run --package editor --release</code>, after some time you should see the editor:</p>
<p><img src="editor.png" alt="editor" /></p>
<p>Great! Now we can actually start making our game. Go to <code>game/src/lib.rs</code> - it is where your game logic located, as you can see 
the <code>fyrox-template</code> generate quite some code for you. There are tiny comments about which place is for what. For more info
about each method, please refer <a href="https://docs.rs/fyrox/0.25.0/fyrox/plugin/trait.Plugin.html">to the docs</a>.</p>
<h2 id="editor"><a class="header" href="#editor">Editor</a></h2>
<p>For now we don't even need to write a single line of code, we can create a scene entirely in the editor. To save your time,
I prepared game-ready scene which we'll be using for the rest of the tutorial. To learn how to use the editor, please refer to
the <code>FyroxEd</code> section of the book.</p>
<p>Download the scene from <a href="scene.zip">here</a> and unpack it to <code>platformer/data</code>, run the editor and use <code>File -&gt; Load Scene</code> to 
load the scene. You should see something like this (do not forget to switch to Orthographic camera mode in scene previewer).</p>
<p><img src="editor_with_scene.png" alt="editor with scene" /></p>
<p>Run the game using <code>Play/Stop</code> button at the top of the scene previewer. Now we can start writing code, at first let's make our
life easier and force the editor to load the scene for us on startup. Go to <code>editor/src/main.rs</code> and replace this:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>Some(StartupData {
    working_directory: Default::default(),
    // Set this to `&quot;path/to/your/scene.rgs&quot;.into()` to force the editor to load the scene on startup.
    scene: Default::default(),
})
<span class="boring">}
</span></code></pre></pre>
<p>with this</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>Some(StartupData {
    working_directory: Default::default(),
    scene: &quot;data/scene.rgs&quot;.into(),
})
<span class="boring">}
</span></code></pre></pre>
<p>Now if you run the editor, it will automatically load the requested scene, this saves some extra clicks and only a few seconds,
but if you multiply that to a number of restarts, this will give you decent time save.</p>
<h2 id="scripts---player"><a class="header" href="#scripts---player">Scripts - Player</a></h2>
<p>Our scene has pretty much everything we need to start adding scripts, we'll start from <code>Player</code> script and make our character 
move.</p>
<p>Navigate to <code>game/src/lib.rs</code> and at the end of the file add the following code snippet:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Visit, Inspect, Debug, Clone)]
struct Player {}

impl Default for Player {
    fn default() -&gt; Self {
        Self {}
    }
}

impl TypeUuidProvider for Player {
    // Returns unique script id for serialization needs.
    fn type_uuid() -&gt; Uuid {
        uuid!(&quot;c5671d19-9f1a-4286-8486-add4ebaadaec&quot;)
    }
}

impl ScriptTrait for Player {
    // Accepts events from Inspector in the editor and modifies self state accordingly.
    fn on_property_changed(&amp;mut self, args: &amp;PropertyChanged) -&gt; bool {
        todo!()
    }

    // Called once at initialization.
    fn on_init(&amp;mut self, context: ScriptContext) {
        todo!()
    }

    // Called everytime when there is an event from OS (mouse click, key press, etc.)
    fn on_os_event(&amp;mut self, event: &amp;Event&lt;()&gt;, context: ScriptContext) {
        todo!()
    }

    // Called every frame at fixed rate of 60 FPS.
    fn on_update(&amp;mut self, context: ScriptContext) {
        todo!()
    }

    // Returns unique script id for serialization needs.
    fn id(&amp;self) -&gt; Uuid {
        Self::type_uuid()
    }

    // Returns unique id of parent plugin.
    fn plugin_uuid(&amp;self) -&gt; Uuid {
        Game::type_uuid()
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>This is a typical &quot;skeleton&quot; of any script, for now it is filled with lots of <code>todo</code>s, we'll fill it with actual code right now.
But before we continue, we must tell the engine that our script exist - we must register it. Remember that <code>on_register</code> method
in <code>Plugin</code> trait implementation? It is exactly for script registration, replace its implementation with following code snippet:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn on_register(&amp;mut self, context: PluginRegistrationContext) {
    let script_constructors = &amp;context.serialization_context.script_constructors;
    script_constructors.add::&lt;Game, Player, _&gt;(&quot;Player&quot;);
}
<span class="boring">}
</span></code></pre></pre>
<p>Now the engine know about our script and will be able to use it. You cannot use it in current state yet, we need to take care about
all <code>todo</code>s first, otherwise the game will panic. If you're eager to see what will happen in the editor, just remove all <code>todo</code>s and
run the editor.</p>
<p>What do we need to use to make player move? We'll be using physical rigid body that is already added in the scene, but we also need to
animate sprite (which is static for now) - we just need to somehow be able to pass it to the script. Let's start by adding required 
field in the <code>Player</code> struct:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[derive(Visit, Inspect, Debug, Clone)]
struct Player {
    sprite: Handle&lt;Node&gt;,
}

impl Default for Player {
    fn default() -&gt; Self {
        Self { sprite: Handle::NONE }
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>After adding this, the editor will be able to see the field and give you an ability to edit it in the Inspector, but for now any
changes done in Inspector will not be applied to the script instance. We need to take care about this, it is a bit of manual work,
future versions of the engine will do this automatically. We're interested in <code>on_property_changed</code> method, fill it the following
code snippet:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if let FieldKind::Object(ref value) = args.value {
    match args.name.as_ref() {
        Player::SPRITE =&gt; {
            self.sprite = value.cast_clone().unwrap();
            true
        }
        _ =&gt; false,
    }
} else {
    false
}
<span class="boring">}
</span></code></pre></pre>
<p>At first, the code checks value kind, if it is a simple object, then we're checking the name of the property and if it is our <code>body</code>,
setting the value. The method expects <code>true</code> or <code>false</code> as a return value, what does each mean? <code>true</code> means that the property was 
handled and <code>false</code> - otherwise. If the editor sees <code>false</code> it prints warning message informing you that something is missing.</p>
<p>Finally we can add our script to the player instance, run the editor, find the player and change its <code>Script</code> property to <code>Player</code>:</p>
<p><img src="script_selection.png" alt="script_selection" /></p>
<p>To assign the correct handle to the sprite, hold <code>Alt</code> and start dragging sprite node from the world viewer to the respective field
in the player script.</p>
<p>Now we can start adding basic movement for the player. Go to <code>Player</code> structure and add following fields:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>move_left: bool,
move_right: bool,
jump: bool,
<span class="boring">}
</span></code></pre></pre>
<p>Don't forget to initialize the fields in <code>Default</code> trait implementation:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Default for Player {
    fn default() -&gt; Self {
        Self {
            body: Handle::NONE,
            move_left: false,
            move_right: false,
            jump: false,
        }
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>These fields will store state of keyboard keys responsible for player movement. Now for <code>on_os_event</code>, add following code in there:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>if let Event::WindowEvent { event, .. } = event {
    if let WindowEvent::KeyboardInput { input, .. } = event {
        if let Some(keycode) = input.virtual_keycode {
            let is_pressed = input.state == ElementState::Pressed;

            match keycode {
                VirtualKeyCode::A =&gt; self.move_left = is_pressed,
                VirtualKeyCode::D =&gt; self.move_right = is_pressed,
                VirtualKeyCode::Space =&gt; self.jump = is_pressed,
                _ =&gt; (),
            }
        }
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>The code responds to OS events and modifies internal movement flags accordingly. Now we need to use the flags somehow, it's time for
<code>on_update</code>. The method is called each frame and allows you to put game logic there:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Called every frame at fixed rate of 60 FPS.
fn on_update(&amp;mut self, context: ScriptContext) {
    // The script can be assigned to any scene node, but we assert that it will work only with
    // 2d rigid body nodes.
    if let Some(rigid_body) = context.node.cast_mut::&lt;RigidBody&gt;() {
        let x_speed = if self.move_left {
            3.0
        } else if self.move_right {
            -3.0
        } else {
            0.0
        };

        if self.jump {
            rigid_body.set_lin_vel(Vector2::new(x_speed, 4.0))
        } else {
            rigid_body.set_lin_vel(Vector2::new(x_speed, rigid_body.lin_vel().y))
        };
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>Finally, some interesting code. At first we checking if the node to which the script is assigned is actually a 2d rigid body, next
we're checking movement flags and forming horizontal speed and applying velocity to the body. Velocity is applied in two ways: if 
the jump button was pressed - apply horizontal velocity and some vertical velocity for jumping. If jump button wasn't pressed - 
just change horizontal velocity - this will allow the player to free fall.</p>
<p>Run the editor and enter play mode, press <code>[A][D][Space]</code> buttons to check if everything works correctly - the player should move 
horizontally and be able to jump. You can jump to the boxes on the right and push them off the ledge. </p>
<p>The movement is working, but the player does not change orientation, if we'll go to the left - it looks of (despite lack of animation),
but if we'll move to the right - it looks like player moves backwards. Let's fix that by changing horizontal scaling of the player's 
sprite. Add following code at the end of the <code>if let ...</code> block of the code above:</p>
<pre><pre class="playground"><code class="language-rust no_run">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// It is always a good practice to check whether the handles are valid, at this point we don't know
// for sure what's the value of the `sprite` field. It can be unassigned and the following code won't
// execute. A simple `context.scene.graph[self.sprite]` would just panicked in this case.
if let Some(sprite) = context.scene.graph.try_get_mut(self.sprite) {
    // We want to change player orientation only if he's moving.
    if x_speed != 0.0 {
        let local_transform = sprite.local_transform_mut();

        let current_scale = **local_transform.scale();

        local_transform.set_scale(Vector3::new(
            // Just change X scaling to mirror player's sprite.
            current_scale.x.copysign(-x_speed),
            current_scale.y,
            current_scale.z,
        ));
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>The comments should clarify what's going on here, but in short we're changing horizontal scaling of player's sprite if the player is
moving. The line <code>current_scale.x.copysign(-x_speed)</code> could be confusing, what it does? It replaces sign of current horizontal scaling
using the opposite sign of <code>x_speed</code>. </p>
<p>Now if you run the game, the player will &quot;look&quot; in correct direction depending on velocity vector.</p>
<h2 id="animation"><a class="header" href="#animation">Animation</a></h2>
<p>Since we're making 2d game, we'll be using simple animations based on continuous change of key frames. In other words we'll be changing
texture on player body sprite. The engine does not provide such functionality yet, simply because it was focused primarily on 3D games
for quite long period of time. It is easy to make such animation &quot;system&quot; ourselves.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../fyrox/tutorials/rpg/tutorial-1/tutorial-part-1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../../fyroxed/introduction.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../fyrox/tutorials/rpg/tutorial-1/tutorial-part-1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../../fyroxed/introduction.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
